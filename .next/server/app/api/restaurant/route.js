"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},791:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>q,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,PATCH:()=>c});var a=r(9303),n=r(8716),o=r(670),i=r(344),u=r(1615);async function p(){let e=(0,i.createRouteHandlerClient)({cookies:u.cookies}),{data:{user:t}}=await e.auth.getUser();if(!t)return Response.json({error:"Not authenticated"},{status:401});let{data:r,error:s}=await e.from("restaurants").select("*").eq("owner_id",t.id).maybeSingle();if(s)return Response.json({error:s.message},{status:500});if(r)return Response.json(r);let{data:a,error:n}=await e.from("restaurants").insert({owner_id:t.id,name:"My Restaurant",created_at:new Date().toISOString(),onboarding_complete:!1}).select().single();return n?Response.json({error:n.message},{status:500}):Response.json(a)}async function c(e){let t=(0,i.createRouteHandlerClient)({cookies:u.cookies}),{data:{user:r}}=await t.auth.getUser();if(!r)return Response.json({error:"Not authenticated"},{status:401});let{name:s,location:a,cuisine:n}=await e.json()||{};if(!s||!s.trim())return Response.json({error:"Restaurant name is required"},{status:400});let{data:o,error:p}=await t.from("restaurants").update({name:s.trim(),location:a?.trim()||null,cuisine:n?.trim()||null,onboarding_complete:!0}).eq("owner_id",r.id).select().maybeSingle();return p?Response.json({error:p.message},{status:500}):o?Response.json(o):Response.json({error:"Restaurant not found"},{status:404})}let l=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/restaurant/route",pathname:"/api/restaurant",filename:"route",bundlePath:"app/api/restaurant/route"},resolvedPagePath:"/workspaces/Selector-os/src/app/api/restaurant/route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:x}=l,g="/api/restaurant/route";function q(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[401],()=>r(791));module.exports=s})();